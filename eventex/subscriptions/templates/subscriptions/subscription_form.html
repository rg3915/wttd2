{% extends "base.html" %}

{% block content %}
<section>
  <div class="content row padding-bottom-3 desktop-12 container">
    <h2>Formulário de Inscrição</h2>
    <div class="desktop-6">
      <form action="." method="post">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div class="form-row label-block input-text">
          <label for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
          {{ form.name.errors }}
          <input type="text" name="name" id="id_name">
        </div>
        <div class="form-row label-block input-text">
          <label for="{{ form.cpf.id_for_label }}">{{ form.cpf.label }}</label>
          {{ form.cpf.errors }}
          {{ form.cpf }}
        </div>
        <div class="form-row label-block input-text">
          <label for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
          {{ form.email.errors }}
          {{ form.email }}
        </div>
        <div class="form-row label-block input-text">
          <label for="{{ form.phone.id_for_label }}">{{ form.phone.label }}</label>
          {{ form.phone.errors }}
          {{ form.phone }}
        </div>
        <button type="submit" id="id_submit" class="btn btn-blue btn-effect" data-toggle="modal" data-target="#myModalMessage">Enviar</button>
      </form>
    </div>
  </div>
</section>

<script>
$.fn.capitalize = function () {
  var wordsToIgnore = ["da","de","di","do", "du"],
      minLength = 2;
  function getWords(str) {
    return str.match(/\S+\s*/g);
  }
  this.each(function () {
    var words = getWords(this.value);
    $.each(words,function(i,word) {
      // only continue if word is not in ignore list
      if (wordsToIgnore.indexOf($.trim(word)) == -1 && $.trim(word).length > minLength) {
        words[i] = words[i].charAt(0).toUpperCase() + words[i].slice(1);
      }
    });
    this.value = words.join("");
  });
};

$('#id_name').on('keyup', function () {
  $(this).capitalize();
}).capitalize();
</script>

{% endblock content %}
